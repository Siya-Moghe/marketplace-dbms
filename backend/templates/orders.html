{% extends "base.html" %}
{% block title %}Order History{% endblock %}

{% block content %}
<h2>Your Orders</h2>

{% if orders %}
<table class="table table-striped">
    <thead>
        <tr>
            <th>Order ID</th>
            <th>Date</th>
            <th>Amount</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for order in orders %} 
        
        <tr>
            <td>{{ order.OrderID }}</td>
            <td>{{ order.OrderDate }}</td>
            <td>{{ order.TotalAmount | round(2) }}</td>
            <td><span class="badge bg-secondary">{{ order.OrderStatus }}</span></td>
            <td>
                <a href="{{ url_for('order_details_page', order_id=order.OrderID) }}" class="btn btn-info btn-sm">Details</a>
                
                {% if order.OrderStatus == 'Pending' or order.OrderStatus == 'Payment Failed' %}
                <form method="POST" action="{{ url_for('delete_order_front', order_id=order.OrderID) }}" class="d-inline">
                    <button type="submit" class="btn btn-danger btn-sm" 
                            onclick="return confirm('WARNING: Are you sure you want to PERMANENTLY DELETE Order #{{ order.OrderID }}?');">
                        Delete ğŸ—‘ï¸
                    </button>
                </form>
                {% endif %}
            </td>
        </tr>
        
        {% endfor %} 
        
    </tbody>
</table>

{% else %}
<p>You have no orders yet.</p>
{% endif %}
{% endblock %}