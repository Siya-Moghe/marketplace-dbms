{% extends "base.html" %}
{% block title %}Products{% endblock %}
{% block content %}
<h2>Products</h2>
<div class="row">
  {% for p in products %}
  <div class="col-md-4 mb-4">
    <div class="card h-100">
      <img src="{{ url_for('static', filename='imgs/' + p.ImageURL) }}" 
           class="card-img-top" 
           alt="{{ p.Prod_Name }}" 
           style="height: 200px; object-fit: contain; padding: 10px; background-color: #f8f9fa;">
            <div class="card-body d-flex flex-column">
        <h5 class="card-title">{{ p.Prod_Name }}</h5>
        <p class="card-text">{{ p.Description }}</p>

        {% if p.variants %}
        <form method="POST" action="{{ url_for('add_to_cart_front') }}" class="mt-auto">
          <div class="mb-2">
            <select name="variant_id" class="form-select form-select-sm" required>
              {% for v in p.variants %}
                <option value="{{ v.VariantID }}">{{ v.Size }}/{{ v.Color }} â€” ${{ "%.2f"|format(v.Price) }} (stock: {{ v.Stock }})</option>
              {% endfor %}
            </select>
         </div>

          <div class="d-flex gap-2">
            <input type="number" name="quantity" value="1" min="1" class="form-control form-control-sm" style="width:80px;">
            <button type="submit" class="btn btn-primary btn-sm">Add to cart</button>
          </div>
        </form>
        {% else %}
          <p class="text-muted">No variants available</p>
        {% endif %}
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}